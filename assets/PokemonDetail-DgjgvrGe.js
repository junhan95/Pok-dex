import{u as D,a as L,r as l,j as e,L as $,g as B,b as T,P as z,f as A,c as M,d as R,e as F}from"./index-BfI31e5W.js";const f=(t,i=[])=>{if(t&&t.species){const n=parseInt(t.species.url.split("/").filter(Boolean).pop());i.push(n),t.evolves_to&&t.evolves_to.length>0&&t.evolves_to.forEach(s=>f(s,i))}return i},U=()=>{const{id:t}=D(),{language:i,t:n}=L(),[s,v]=l.useState(null),[c,j]=l.useState(null),[m,k]=l.useState([]),[N,d]=l.useState(!0),[p,h]=l.useState(null);if(l.useEffect(()=>{window.scrollTo(0,0)},[t]),l.useEffect(()=>{(async()=>{try{d(!0);const[o,r]=await Promise.all([A(t),M(t)]);if(v(o),j(r),r&&r.evolution_chain?.url){const E=await R(r.evolution_chain.url),P=f(E.chain),w=await F(),S=P.map(I=>w.find(C=>C.id===I)).filter(Boolean);k(S)}h(null)}catch{h("Failed to load Pokémon details. It might not exist.")}finally{d(!1)}})()},[t]),N)return e.jsx("main",{className:"container",style:{padding:"4rem 0"},children:e.jsx($,{})});if(p)return e.jsx("main",{className:"container",children:e.jsx("div",{className:"error-message",children:p})});if(!s)return null;const b=B(s.id),y=s.sprites?.other?.["official-artwork"]?.front_default||s.sprites?.front_default,u=i==="ko"?"ko":"en",x=c?.flavor_text_entries.find(a=>a.language.name===u)||c?.flavor_text_entries.find(a=>a.language.name==="en"),_=x?x.flavor_text.replace(/\f|\n/g," "):"No description available.",g=c?.names?.find(a=>a.language.name===u)?.name||s.name;return e.jsxs("main",{className:"container pokemon-detail-page",children:[e.jsx(T,{to:"/",className:"btn-back",children:n("back")}),e.jsxs("div",{className:"pokemon-detail-header glass",children:[e.jsx("div",{className:"pokemon-detail-image-wrapper",children:e.jsx("img",{src:b,alt:g,onError:a=>{a.target.onerror=null,a.target.src=y},className:"pokemon-detail-image"})}),e.jsxs("div",{className:"pokemon-detail-info",children:[e.jsxs("span",{className:"pokemon-detail-id",children:["#",String(s.id).padStart(4,"0")]}),e.jsx("h1",{className:"pokemon-detail-name",children:g}),e.jsx("div",{className:"pokemon-types",style:{justifyContent:"flex-start",marginBottom:"1.5rem"},children:s.types.map(a=>e.jsx("span",{className:"type-badge",style:{backgroundColor:`var(--type-${a.type.name})`},children:n(`type_${a.type.name}`)},a.type.name))}),e.jsx("p",{className:"pokemon-description",children:_}),e.jsxs("div",{className:"pokemon-physical-stats",children:[e.jsxs("div",{className:"stat-box",children:[e.jsx("span",{className:"stat-label",children:n("height")}),e.jsxs("span",{className:"stat-value",children:[s.height/10," m"]})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("span",{className:"stat-label",children:n("weight")}),e.jsxs("span",{className:"stat-value",children:[s.weight/10," kg"]})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("span",{className:"stat-label",children:n("abilities")}),e.jsx("span",{className:"stat-value",style:{textTransform:"capitalize"},children:s.abilities.map(a=>a.ability.name.replace("-"," ")).join(", ")})]})]})]})]}),e.jsxs("div",{className:"pokemon-base-stats glass",children:[e.jsx("h2",{children:n("base_stats")}),e.jsx("div",{className:"stats-container",children:s.stats.map(a=>e.jsxs("div",{className:"stat-bar-container",children:[e.jsx("span",{className:"stat-bar-label",children:n(`stat_${a.stat.name}`)}),e.jsx("span",{className:"stat-bar-number",children:a.base_stat}),e.jsx("div",{className:"stat-bar-track",children:e.jsx("div",{className:"stat-bar-fill",style:{width:`${Math.min(100,a.base_stat/255*100)}%`,backgroundColor:`var(--type-${s.types[0].type.name})`},role:"progressbar","aria-valuenow":a.base_stat,"aria-valuemin":"0","aria-valuemax":"255"})})]},a.stat.name))})]}),m.length>1&&e.jsxs("div",{className:"pokemon-evolutions",style:{marginTop:"4rem"},children:[e.jsx("h2",{style:{fontSize:"2rem",marginBottom:"2rem",textAlign:"center"},children:i==="ko"?"연관 몬스터 (발전형)":"Related Monsters (Evolutions)"}),e.jsx("div",{className:"pokemon-grid",children:m.map((a,o)=>e.jsx(z,{pokemon:a,index:o},a.id))})]})]})};export{U as default};
